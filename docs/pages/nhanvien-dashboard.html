<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Nhân viên</title>
    <link rel="stylesheet" href="../components/common-styles.css">
    <link rel="stylesheet" href="../components/form-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* Basic Layout */
        body {
            margin: 0;
            padding: 0;
            background: #f8f9fa;
            font-size: 14px;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #34495e;
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-brand {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        
        .sidebar h3 {
            margin: 0;
            color: white;
            font-size: 18px;
        }
        
        .nav-section {
            padding: 15px 0;
        }
        
        .nav-section-title {
            color: rgba(255,255,255,0.6);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            padding: 0 20px 10px;
            letter-spacing: 1px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .nav-link:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .nav-link.active {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        .nav-link i {
            width: 20px;
            margin-right: 12px;
        }
        
        .nav-badge {
            background: #e74c3c;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: auto;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            background: white;
            padding: 15px 30px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            margin: 0;
            color: #2c3e50;
            font-size: 24px;
        }
        
        .breadcrumb {
            color: #666;
            font-size: 14px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .notification-center {
            position: relative;
        }
        
        .notification-bell {
            background: none;
            border: none;
            color: #666;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
            position: relative;
        }
        
        .notification-bell:hover {
            background: #f8f9fa;
            color: #333;
        }
        
        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }
        
        .notification-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 350px;
            max-height: 400px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .notification-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .notification-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .notification-item {
            padding: 12px 20px;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .notification-item:hover {
            background: #f8f9fa;
        }
        
        .notification-item.unread {
            background: #e8f4f8;
            border-left: 3px solid #3498db;
        }
        
        .notification-title {
            font-weight: 600;
            font-size: 13px;
            color: #2c3e50;
            margin-bottom: 4px;
        }
        
        .notification-message {
            font-size: 12px;
            color: #666;
            margin-bottom: 4px;
            line-height: 1.4;
        }
        
        .notification-time {
            font-size: 11px;
            color: #999;
        }
        
        .notification-footer {
            padding: 10px 20px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        
        .notification-footer a {
            color: #3498db;
            text-decoration: none;
            font-size: 12px;
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        /* Content */
        .content {
            padding: 30px;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid var(--card-color);
        }
        
        .stat-card:nth-child(1) { --card-color: #3498db; }
        .stat-card:nth-child(2) { --card-color: #f39c12; }
        .stat-card:nth-child(3) { --card-color: #27ae60; }
        .stat-card:nth-child(4) { --card-color: #e74c3c; }
        
        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        /* Table */
        .table-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .table-header {
            padding: 20px 25px;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a6fd8;
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-info {
            background: #3498db;
            color: white;
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-sm {
            padding: 4px 8px;
            font-size: 12px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }
        
        tbody tr:hover {
            background: #f8f9fa;
        }
        
        /* Status */
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-da-tao {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .status-cho-kiem-tra {
            background: #fff3e0;
            color: #f57c00;
        }
        
        .status-da-hoan-thien {
            background: #e8f5e8;
            color: #388e3c;
        }
        
        .status-can-bo-sung {
            background: #ffebee;
            color: #d32f2f;
        }
        
        .status-cho-xet-duyet {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        
        .status-da-phe-duyet {
            background: #e8f5e8;
            color: #388e3c;
        }
        
        .status-dang-thuc-hien {
            background: #e1f5fe;
            color: #0288d1;
        }
        
        .status-dat {
            background: #e8f5e8;
            color: #2e7d32;
            font-weight: 600;
        }
        
        .status-chua-dat {
            background: #ffebee;
            color: #c62828;
            font-weight: 600;
        }
        
        .status-da-danh-gia {
            background: #fff3e0;
            color: #ef6c00;
        }
        
        .status-hoan-tat {
            background: #f3e5f5;
            color: #7b1fa2;
            font-weight: 600;
        }
        
        .filter-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .filter-controls select {
            min-width: 200px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background: white;
            margin: 5% auto;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
        }
        
        .modal-header {
            background: #667eea;
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            margin: 0;
            font-size: 18px;
        }
        
        .close {
            background: transparent;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        /* Form */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .form-help {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        /* Filters */
        .filters {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filter-label {
            font-size: 14px;
            color: #666;
            white-space: nowrap;
        }
        
        .search-box {
            position: relative;
            flex: 1;
            max-width: 300px;
        }
        
        .search-input {
            width: 100%;
            padding: 8px 12px 8px 35px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success {
            background: #27ae60;
        }
        
        .notification.error {
            background: #e74c3c;
        }
        
        .notification.info {
            background: #3498db;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-brand">
                <img src="../images/Logo_chinh.png" 
     alt="Logo" 
     style="height:48px; margin-bottom:10px; filter:brightness(0) invert(1);">
                <h3>QUẢN LÝ ĐỀ TÀI<br>NGHIÊN CỨU KHOA HỌC</h3>
            </div>
            
            <nav class="nav-section">
                <div class="nav-section-title">QUẢN LÝ HỒ SƠ</div>
                <a href="#quan-ly-hoso" class="nav-link active" onclick="showSection('quan-ly-hoso')">
                    <i class="fas fa-folder-open"></i>
                    <span>Quản lý Hồ sơ</span>
                </a>
                <a href="#kiem-tra-hoso" class="nav-link" onclick="showSection('kiem-tra-hoso')">
                    <i class="fas fa-search"></i>
                    <span>Kiểm tra hồ sơ</span>
                    <span class="nav-badge" id="choKiemTraBadge">0</span>
                </a>
                <a href="#gui-xet-duyet" class="nav-link" onclick="showSection('gui-xet-duyet')">
                    <i class="fas fa-paper-plane"></i>
                    <span>Gửi xét duyệt</span>
                </a>
                <a href="#thong-bao-yeu-cau-chinh-sua" class="nav-link" onclick="showSection('thong-bao-yeu-cau-chinh-sua')">
                    <i class="fas fa-edit"></i>
                    <span>Thông báo yêu cầu chỉnh sửa</span>
                    <span class="nav-badge" id="choChinhSuaBadge">0</span>
                </a>
                <a href="#xac-nhan-phe-duyet" class="nav-link" onclick="showSection('xac-nhan-phe-duyet')">
                    <i class="fas fa-check-circle"></i>
                    <span>Xác nhận phê duyệt</span>
                </a>
            </nav>
            
            <nav class="nav-section">
                <div class="nav-section-title">QUẢN LÝ TIẾN ĐỘ</div>
                <a href="#lich-bao-cao" class="nav-link" onclick="showSection('lich-bao-cao')">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Lịch báo cáo tiến độ</span>
                </a>
                <a href="#kiem-tra-tien-do" class="nav-link" onclick="showSection('kiem-tra-tien-do')">
                    <i class="fas fa-tasks"></i>
                    <span>Kiểm tra tiến độ</span>
                </a>
                <a href="#cap-nhat-tien-do" class="nav-link" onclick="showSection('cap-nhat-tien-do')">
                    <i class="fas fa-chart-line"></i>
                    <span>Cập nhật tiến độ</span>
                </a>
                <a href="#tong-hop-tien-do" class="nav-link" onclick="showSection('tong-hop-tien-do')">
                    <i class="fas fa-file-alt"></i>
                    <span>Tổng hợp tiến độ</span>
                </a>
            </nav>
            
            <nav class="nav-section">
                <div class="nav-section-title">NGHIỆM THU</div>
                <a href="#nhac-nop-nghiem-thu" class="nav-link" onclick="showSection('nhac-nop-nghiem-thu')">
                    <i class="fas fa-bell"></i>
                    <span>Nhắc nộp nghiệm thu</span>
                </a>
                <a href="#lap-danh-sach-nghiem-thu" class="nav-link" onclick="showSection('lap-danh-sach-nghiem-thu')">
                    <i class="fas fa-list"></i>
                    <span>Lập danh sách nghiệm thu</span>
                </a>
                <a href="#kiem-tra-nghiem-thu" class="nav-link" onclick="showSection('kiem-tra-nghiem-thu')">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Kiểm tra nghiệm thu</span>
                </a>
                <a href="#luu-tru-ket-qua" class="nav-link" onclick="showSection('luu-tru-ket-qua')">
                    <i class="fas fa-save"></i>
                    <span>Lưu trữ kết quả</span>
                </a>
                <a href="#xac-nhan-hoan-tat" class="nav-link" onclick="showSection('xac-nhan-hoan-tat')">
                    <i class="fas fa-trophy"></i>
                    <span>Xác nhận hoàn tất</span>
                </a>
            </nav>
            
            <nav class="nav-section">
                <div class="nav-section-title">HỆ THỐNG</div>
                <a href="../index.html" class="nav-link">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Đăng xuất</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div>
                    <h1>Nhân viên - Trang chủ</h1>
                    <div class="breadcrumb">
                        <span>Trang chủ > <span id="currentPage">Quản lý Hồ sơ</span></span>
                    </div>
                </div>
                <div class="user-info">
                    <!-- Notification Center -->
                    <div class="notification-center">
                        <button class="notification-bell" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notificationBadge">5</span>
                        </button>
                        
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <span>Thông báo</span>
                                <button onclick="markAllAsRead()" style="background: none; border: none; color: #3498db; font-size: 12px; cursor: pointer;">Đánh dấu đã đọc</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <div class="notification-item unread" onclick="readNotification(1)">
                                    <div class="notification-title">Hồ sơ mới cần kiểm tra</div>
                                    <div class="notification-message">Chủ nhiệm đề tài Nguyễn Văn A đã gửi hồ sơ đề tài "AI trong giáo dục"</div>
                                    <div class="notification-time">30 phút trước</div>
                                </div>
                                <div class="notification-item unread" onclick="readNotification(2)">
                                    <div class="notification-title">Hội đồng đã phê duyệt đề tài</div>
                                    <div class="notification-message">Đề tài DT003 đã được hội đồng khoa học phê duyệt</div>
                                    <div class="notification-time">2 giờ trước</div>
                                </div>
                                <div class="notification-item unread" onclick="readNotification(3)">
                                    <div class="notification-title">Báo cáo tiến độ đã nộp</div>
                                    <div class="notification-message">Chủ nhiệm đề tài đã nộp báo cáo tiến độ kỳ 1</div>
                                    <div class="notification-time">1 ngày trước</div>
                                </div>
                                <div class="notification-item unread" onclick="readNotification(4)">
                                    <div class="notification-title">Hồ sơ nghiệm thu mới</div>
                                    <div class="notification-message">Đề tài DT001 đã gửi hồ sơ nghiệm thu hoàn chỉnh</div>
                                    <div class="notification-time">1 ngày trước</div>
                                </div>
                                <div class="notification-item" onclick="readNotification(5)">
                                    <div class="notification-title">Hội đồng nghiệm thu đã đánh giá</div>
                                    <div class="notification-message">Đề tài DT002 đã nhận kết quả nghiệm thu từ hội đồng</div>
                                    <div class="notification-time">2 ngày trước</div>
                                </div>
                            </div>
                            <div class="notification-footer">
                                <a href="#" onclick="showAllNotifications()">Xem tất cả thông báo</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="user-avatar">NV</div>
                    <div>
                        <div style="font-weight: 600;">Nhân viên X</div>
                        <div style="font-size: 12px; color: #666;">Quản lý đề tài</div>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <div class="content">
                <!-- UC 1.1: Quản lý Hồ sơ -->
                <section id="quan-ly-hoso" class="content-section active">
                    <!-- Thống kê nhanh -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalHoSo">0</div>
                            <div class="stat-label">Tổng hồ sơ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="choKiemTra">0</div>
                            <div class="stat-label">Chờ kiểm tra</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="daHoanThien">0</div>
                            <div class="stat-label">Đã hoàn thiện</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="dangThucHien">0</div>
                            <div class="stat-label">Đang thực hiện</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">QUẢN LÝ HỒ SƠ ĐỀ TÀI</h2>
                            <button class="btn btn-primary" onclick="showCreateForm()">
                                <i class="fas fa-plus"></i> Tạo hồ sơ mới
                            </button>
                        </div>
                        
                        <!-- Tabs -->
                        <div style="padding: 15px 25px; background: #f8f9fa; border-bottom: 1px solid #eee;">
                            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <button class="btn btn-sm" id="tabAll" onclick="filterByStatus('')">Tất cả</button>
                                <button class="btn btn-sm" id="tabDaTao" onclick="filterByStatus('da-tao')">Đã tạo</button>
                                <button class="btn btn-sm" id="tabChoKiemTra" onclick="filterByStatus('cho-kiem-tra')">Chờ kiểm tra</button>
                                <button class="btn btn-sm" id="tabDaHoanThien" onclick="filterByStatus('da-hoan-thien')">Đã hoàn thiện</button>
                                <button class="btn btn-sm" id="tabDangThucHien" onclick="filterByStatus('dang-thuc-hien')">Đang thực hiện</button>
                            </div>
                            
                            <!-- Bộ lọc và tìm kiếm -->
                            <div class="filters">
                                <div class="filter-group">
                                    <span class="filter-label">Lĩnh vực:</span>
                                    <select id="linhVucFilter" class="form-select" style="width: 150px;" onchange="applyFilters()">
                                        <option value="">Tất cả</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <span class="filter-label">Năm:</span>
                                    <select id="namFilter" class="form-select" style="width: 100px;" onchange="applyFilters()">
                                        <option value="">Tất cả</option>
                                        <option value="2025">2025</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <div class="search-box">
                                    <i class="fas fa-search search-icon"></i>
                                    <input type="text" class="search-input" placeholder="Tìm theo mã hồ sơ, tên đề tài, chủ nhiệm..." onkeyup="applyFilters()">
                                </div>
                            </div>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã hồ sơ</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Lĩnh vực</th>
                                    <th>Trạng thái</th>
                                    <th>Ngày tạo</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="hoSoTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.4: Kiểm tra hồ sơ đề tài -->
                <section id="kiem-tra-hoso" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">KIỂM TRA HỒ SƠ ĐỀ TÀI</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã hồ sơ</th>
                                    <th>Tên đề tài</th>
                                    <th>Người đề xuất</th>
                                    <th>Ngày nộp</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="kiemTraTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.5: Gửi xét duyệt -->
                <section id="gui-xet-duyet" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">GỬI XÉT DUYỆT</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã hồ sơ</th>
                                    <th>Tên đề tài</th>
                                    <th>Người đề xuất</th>
                                    <th>Lĩnh vực</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="guiXetDuyetTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.7: Thông báo yêu cầu chỉnh sửa -->
                <section id="thong-bao-yeu-cau-chinh-sua" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">THÔNG BÁO YÊU CẦU CHỈNH SỬA</h2>
                            <p class="table-desc">Gửi thông báo yêu cầu chỉnh sửa hồ sơ đến chủ nhiệm đề tài</p>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã hồ sơ</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Ngày nộp</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="chinhSuaTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.2: Xác nhận phê duyệt và triển khai -->
                <section id="xac-nhan-phe-duyet" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">XÁC NHẬN PHÊ DUYỆT VÀ TRIỂN KHAI</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã hồ sơ</th>
                                    <th>Tên đề tài</th>
                                    <th>Người đề xuất</th>
                                    <th>Lĩnh vực</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="pheDuyetTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.9: Lịch báo cáo tiến độ -->
                <section id="lich-bao-cao" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">LỊCH BÁO CÁO TIẾN ĐỘ</h2>
                        </div>
                        
                        <!-- Tổng quan -->
                        <div style="padding: 20px 25px; background: #f8f9fa; border-bottom: 1px solid #eee;">
                            <h4 style="margin: 0 0 15px;">Tổng quan:</h4>
                            <div style="display: flex; gap: 20px;">
                                <div><span class="status status-can-bo-sung"><span id="canBaoCao3Ngay">0</span> đề tài cần báo cáo trong 3 ngày</span></div>
                                <div><span class="status status-cho-kiem-tra"><span id="canBaoCao7Ngay">0</span> đề tài cần báo cáo trong 7 ngày</span></div>
                                <div><span class="status status-da-hoan-thien"><span id="dangThucHienBinhThuong">0</span> đề tài đang thực hiện bình thường</span></div>
                            </div>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Hạn báo cáo</th>
                                    <th>Kỳ báo cáo</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="lichBaoCaoTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.11: Kiểm tra tiến độ -->
                <section id="kiem-tra-tien-do" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">KIỂM TRA HỒ SƠ TIẾN ĐỘ</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Kỳ báo cáo</th>
                                    <th>Ngày nộp</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="kiemTraTienDoTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.12: Cập nhật tiến độ định kỳ -->
                <section id="cap-nhat-tien-do" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">CẬP NHẬT TIẾN ĐỘ ĐỊNH KỲ</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Kỳ báo cáo</th>
                                    <th>Tiến độ</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="capNhatTienDoTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.13: Tổng hợp tiến độ các đề tài -->
                <section id="tong-hop-tien-do" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">TỔNG HỢP TIẾN ĐỘ CÁC ĐỀ TÀI</h2>
                            <button class="btn btn-primary" onclick="taoTongHopTienDo()">
                                <i class="fas fa-plus"></i> Tạo bảng tổng hợp
                            </button>
                        </div>
                        
                        <div style="padding: 20px 25px;">
                            <div class="form-group">
                                <label class="form-label">Chọn đề tài cần tổng hợp:</label>
                                <div id="danhSachDeTaiTongHop">
                                    <!-- Checkbox list will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- UC 1.14: Nhắc nộp hồ sơ nghiệm thu -->
                <section id="nhac-nop-nghiem-thu" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">NHẮC NỘP HỒ SƠ NGHIỆM THU</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Hạn nộp</th>
                                    <th>Tình trạng</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="nhacNopTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.16: Lập danh sách đề tài cần nghiệm thu -->
                <section id="lap-danh-sach-nghiem-thu" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">LẬP DANH SÁCH ĐỀ TÀI CẦN NGHIỆM THU</h2>
                            <button class="btn btn-primary" onclick="lapDanhSachNghiemThu()">
                                <i class="fas fa-list"></i> Lập danh sách
                            </button>
                        </div>
                        
                        <div style="padding: 20px 25px;">
                            <div class="form-group">
                                <label class="form-label">Chọn đề tài sẵn sàng nghiệm thu:</label>
                                <div id="danhSachDeTaiNghiemThu">
                                    <!-- Checkbox list will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- UC 1.19: Kiểm tra hồ sơ nghiệm thu -->
                <section id="kiem-tra-nghiem-thu" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">KIỂM TRA HỒ SƠ NGHIỆM THU</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Ngày nộp</th>
                                    <th>Tình trạng</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="kiemTraNghiemThuTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.18: Lưu trữ biên bản, bảng điểm và kết quả -->
                <section id="luu-tru-ket-qua" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                                                        <h2 class="table-title">LƯU TRỮ BIÊN BẢN, BẢNG ĐIỂM VÀ KẾT QUẢ</h2>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Kết quả</th>
                                    <th>Ngày nghiệm thu</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="luuTruTable">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- UC 1.20: Xác nhận hoàn tất đề tài -->
                <!-- UC 1.20: Xác nhận hoàn tất đề tài -->
                <section id="xac-nhan-hoan-tat" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">XÁC NHẬN HOÀN TẤT ĐỀ TÀI</h2>
                            <div class="filter-controls">
                                <div class="filter-tabs" style="display: flex; gap: 10px; margin-bottom: 15px;">
                                    <button class="btn btn-primary" onclick="filterDeTaiHoanTat('all')">Tất cả</button>
                                    <button class="btn btn-outline-primary" onclick="filterDeTaiHoanTat('dat')">Đạt</button>
                                    <button class="btn btn-outline-primary" onclick="filterDeTaiHoanTat('chua-dat')">Chưa đạt</button>
                                    <button class="btn btn-outline-primary" onclick="filterDeTaiHoanTat('hoan-tat')">Đã hoàn tất</button>
                                </div>
                                <button class="btn btn-info btn-sm" onclick="refreshDeTaiHoanTat()">
                                    <i class="fas fa-sync-alt"></i> Làm mới
                                </button>
                            </div>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Mã đề tài</th>
                                    <th>Tên đề tài</th>
                                    <th>Chủ nhiệm</th>
                                    <th>Kết quả xếp loại</th>
                                    <th>Điểm trung bình</th>
                                    <th>Ngày nghiệm thu</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="deTaiHoanTatTable">
                                <!-- Data will be loaded from JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Statistics -->
                    <div class="stats-grid" style="margin-top: 30px;">
                        <div class="stat-card" style="--card-color: #27ae60;">
                            <div class="stat-number" id="statDat">0</div>
                            <div class="stat-label">Đề tài ĐẠT</div>
                        </div>
                        <div class="stat-card" style="--card-color: #e74c3c;">
                            <div class="stat-number" id="statChuaDat">0</div>
                            <div class="stat-label">Đề tài CHƯA ĐẠT</div>
                        </div>
                        <div class="stat-card" style="--card-color: #3498db;">
                            <div class="stat-number" id="statHoanTat">0</div>
                            <div class="stat-label">Đã hoàn tất</div>
                        </div>
                        <div class="stat-card" style="--card-color: #f39c12;">
                            <div class="stat-number" id="statTongDeTai">0</div>
                            <div class="stat-label">Tổng đề tài</div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal cho tạo hồ sơ -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">TẠO HỒ SƠ SƠ BỘ</h3>
                <button class="close" onclick="hideModal('createModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createForm">
                    <div class="form-group">
                        <label class="form-label">Tên đề tài: <span class="required">*</span></label>
                        <input type="text" id="tenDeTai" class="form-input" placeholder="Nhập tên đề tài..." required>
                        <div class="form-help">Gợi ý: Tên đề tài nên ngắn gọn, rõ ràng (50-200 ký tự)</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Người đề xuất: <span class="required">*</span></label>
                        <input type="text" id="nguoiDeXuat" class="form-input" placeholder="Tìm kiếm giảng viên/sinh viên..." required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Lĩnh vực nghiên cứu: <span class="required">*</span></label>
                        <select id="linhVuc" class="form-select" required>
                            <option value="">Chọn lĩnh vực...</option>
                            <option value="Công nghệ thông tin">Công nghệ thông tin</option>
                            <option value="Khoa học tự nhiên">Khoa học tự nhiên</option>
                            <option value="Khoa học xã hội">Khoa học xã hội</option>
                            <option value="Y học">Y học</option>
                            <option value="Nông nghiệp">Nông nghiệp</option>
                            <option value="Môi trường">Môi trường</option>
                        </select>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">Ngày bắt đầu: <span class="required">*</span></label>
                            <input type="date" id="ngayBatDau" class="form-input" required>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">Ngày kết thúc: <span class="required">*</span></label>
                            <input type="date" id="ngayKetThuc" class="form-input" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Kinh phí dự kiến (VNĐ):</label>
                        <input type="number" id="kinhPhi" class="form-input" placeholder="Nhập số tiền...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Mô tả ngắn:</label>
                        <textarea id="moTa" class="form-textarea" rows="3" placeholder="Nhập mô tả ngắn về đề tài..."></textarea>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn btn-secondary" onclick="hideModal('createModal')">Hủy</button>
                        <button type="button" class="btn btn-secondary" onclick="saveDraft()">Lưu nháp</button>
                        <button type="submit" class="btn btn-primary">Tạo</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal cho kiểm tra hồ sơ -->
    <div id="kiemTraModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">KIỂM TRA HỒ SƠ ĐỀ TÀI</h3>
                <button class="close" onclick="hideModal('kiemTraModal')">&times;</button>
            </div>
            <div class="modal-body" id="kiemTraContent">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal cho UC 1.7: Thông báo yêu cầu chỉnh sửa -->
    <div id="thongBaoChinhSuaModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">THÔNG BÁO YÊU CẦU CHỈNH SỬA</h3>
                <button class="close" onclick="hideModal('thongBaoChinhSuaModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="thongBaoChinhSuaForm">
                    <div class="form-group">
                        <label class="form-label">Hồ sơ đề tài:</label>
                        <div id="thongTinDeTai" style="padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 15px;">
                            <!-- Thông tin đề tài sẽ được load ở đây -->
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Loại yêu cầu chỉnh sửa: <span class="required">*</span></label>
                        <select id="loaiChinhSua" class="form-select" required onchange="updateChinhSuaFields()">
                            <option value="">Chọn loại yêu cầu...</option>
                            <option value="thong-tin-co-ban">Thông tin cơ bản</option>
                            <option value="tai-lieu-dinh-kem">Tài liệu đính kèm</option>
                            <option value="noi-dung-nghien-cuu">Nội dung nghiên cứu</option>
                            <option value="kinh-phi">Kinh phí</option>
                            <option value="thoi-gian">Thời gian thực hiện</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Nội dung cần chỉnh sửa cụ thể: <span class="required">*</span></label>
                        <textarea id="noiDungChinhSua" class="form-textarea" rows="4" 
                            placeholder="Mô tả chi tiết những phần cần chỉnh sửa..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Lý do yêu cầu chỉnh sửa: <span class="required">*</span></label>
                        <textarea id="lyDoChinhSua" class="form-textarea" rows="3" 
                            placeholder="Giải thích lý do tại sao cần chỉnh sửa..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Hạn chót hoàn thành: <span class="required">*</span></label>
                        <input type="datetime-local" id="hanChotChinhSua" class="form-input" required>
                        <div class="form-help">Gợi ý: Thông thường cho 7-14 ngày để chỉnh sửa</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Mức độ ưu tiên:</label>
                        <select id="mucDoUuTien" class="form-select">
                            <option value="binh-thuong">Bình thường</option>
                            <option value="cao">Cao</option>
                            <option value="khan-cap">Khẩn cấp</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi chú thêm:</label>
                        <textarea id="ghiChuThem" class="form-textarea" rows="2" 
                            placeholder="Ghi chú bổ sung (nếu có)..."></textarea>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn btn-secondary" onclick="hideModal('thongBaoChinhSuaModal')">Hủy</button>
                        <button type="submit" class="btn btn-primary">Gửi thông báo</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal xem chi tiết kết quả nghiệm thu -->
    <div id="chiTietKetQuaModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title">CHI TIẾT KẾT QUẢ NGHIỆM THU</h3>
                <button class="close" onclick="hideModal('chiTietKetQuaModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Thông tin đề tài:</label>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                        <div><strong>Mã đề tài:</strong> <span id="detailMaDeTai"></span></div>
                        <div><strong>Tên đề tài:</strong> <span id="detailTenDeTai"></span></div>
                        <div><strong>Chủ nhiệm:</strong> <span id="detailChuNhiem"></span></div>
                        <div><strong>Ngày nghiệm thu:</strong> <span id="detailNgayNghiemThu"></span></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Kết quả đánh giá:</label>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 6px; border-left: 4px solid #3498db;">
                        <div><strong>Điểm trung bình:</strong> <span id="detailDiem" style="font-size: 18px; color: #2c3e50;"></span>/10</div>
                        <div><strong>Xếp loại:</strong> <span id="detailXepLoai" class="status"></span></div>
                        <div><strong>Quyết định:</strong> <span id="detailQuyetDinh"></span></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phiếu đánh giá từ hội đồng:</label>
                    <table style="margin-bottom: 15px;">
                        <thead>
                            <tr>
                                <th>Thành viên hội đồng</th>
                                <th>Điểm</th>
                                <th>Nhận xét</th>
                            </tr>
                        </thead>
                        <tbody id="detailPhieuDanhGia">
                            <tr>
                                <td>PGS.TS. Nguyễn Văn X</td>
                                <td>8.5</td>
                                <td>Đề tài có tính ứng dụng cao, kết quả nghiên cứu rõ ràng</td>
                            </tr>
                            <tr>
                                <td>GS.TS. Trần Thị Y</td>
                                <td>8.2</td>
                                <td>Phương pháp nghiên cứu phù hợp, cần cải thiện phần thực nghiệm</td>
                            </tr>
                            <tr>
                                <td>TS. Lê Văn Z</td>
                                <td>8.8</td>
                                <td>Kết quả vượt mong đợi, có thể áp dụng thực tế</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Biên bản nghiệm thu:</label>
                    <textarea id="detailBienBan" class="form-textarea" rows="4" readonly>
Hội đồng nghiệm thu đã xem xét đầy đủ hồ sơ và nghe báo cáo của tác giả. Đề tài đạt các mục tiêu đề ra, có tính khả thi và ứng dụng cao. Sản phẩm nghiên cứu hoàn thiện, tài liệu rõ ràng. Hội đồng thống nhất đánh giá đề tài đạt yêu cầu.
                    </textarea>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal xác nhận hoàn tất -->
    <div id="xacNhanHoanTatModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">XÁC NHẬN HOÀN TẤT ĐỀ TÀI</h3>
                <button class="close" onclick="hideModal('xacNhanHoanTatModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="submitXacNhanHoanTat(event)">
                    <div class="form-group">
                        <label class="form-label">Thông tin đề tài:</label>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                            <div><strong>Mã đề tài:</strong> <span id="confirmMaDeTai"></span></div>
                            <div><strong>Tên đề tài:</strong> <span id="confirmTenDeTai"></span></div>
                            <div><strong>Kết quả:</strong> <span id="confirmKetQua" class="status"></span></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi chú cuối cùng:</label>
                        <textarea id="ghiChuCuoiCung" class="form-textarea" rows="3" 
                            placeholder="Nhập ghi chú cuối cùng về đề tài (tùy chọn)..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="chkGuiThongBao" checked>
                            Gửi thông báo hoàn tất đến chủ nhiệm đề tài
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="chkCapNhatTrangThai" checked>
                            Cập nhật trạng thái đề tài sang "Hoàn tất"
                        </label>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn btn-secondary" onclick="hideModal('xacNhanHoanTatModal')">Hủy</button>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-check-circle"></i> Xác nhận hoàn tất
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Modal gửi yêu cầu bổ sung -->
    <div id="yeuCauBoSungModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">GỬI YÊU CẦU BỔ SUNG THÔNG TIN</h3>
                <button class="close" onclick="hideModal('yeuCauBoSungModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="submitYeuCauBoSung(event)">
                    <div class="form-group">
                        <label class="form-label">Thông tin đề tài:</label>
                        <div style="background: #fff5f5; padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid #e74c3c;">
                            <div><strong>Mã đề tài:</strong> <span id="boSungMaDeTai"></span></div>
                            <div><strong>Tên đề tài:</strong> <span id="boSungTenDeTai"></span></div>
                            <div><strong>Kết quả:</strong> <span class="status status-chua-dat">Chưa đạt</span></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Yêu cầu bổ sung/làm rõ thông tin: <span class="required">*</span></label>
                        <textarea id="noiDungYeuCau" class="form-textarea" rows="5" required
                            placeholder="Nhập chi tiết các yêu cầu bổ sung hoặc làm rõ thông tin mà chủ nhiệm đề tài cần thực hiện..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Hạn phản hồi:</label>
                        <input type="date" id="hanPhanHoi" class="form-input" required>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn btn-secondary" onclick="hideModal('yeuCauBoSungModal')">Hủy</button>
                        <button type="submit" class="btn btn-warning">
                            <i class="fas fa-paper-plane"></i> Gửi yêu cầu
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../js/nhanvien.js"></script>
    <script>
        // Notification system functions
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }
        
        function readNotification(id) {
            const item = event.currentTarget;
            item.classList.remove('unread');
            updateNotificationBadge();
        }
        
        function markAllAsRead() {
            const items = document.querySelectorAll('.notification-item.unread');
            items.forEach(item => item.classList.remove('unread'));
            updateNotificationBadge();
        }
        
        function updateNotificationBadge() {
            const unreadCount = document.querySelectorAll('.notification-item.unread').length;
            const badge = document.getElementById('notificationBadge');
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
        
        function showAllNotifications() {
            alert('Chức năng xem tất cả thông báo đang được phát triển');
        }
        
        // Close notification dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const notificationCenter = document.querySelector('.notification-center');
            const dropdown = document.getElementById('notificationDropdown');
            
            if (!notificationCenter.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Add new notification function for system use
        function addNotification(title, message, type = 'info') {
            const notificationList = document.getElementById('notificationList');
            
            const notificationItem = document.createElement('div');
            notificationItem.className = 'notification-item unread';
            notificationItem.onclick = function() { readNotification(); };
            
            notificationItem.innerHTML = `
                <div class="notification-title">${title}</div>
                <div class="notification-message">${message}</div>
                <div class="notification-time">Vừa xong</div>
            `;
            
            notificationList.insertBefore(notificationItem, notificationList.firstChild);
            updateNotificationBadge();
            
            // Show notification badge animation
            const badge = document.getElementById('notificationBadge');
            badge.style.animation = 'bounce 0.5s';
            setTimeout(() => {
                badge.style.animation = '';
            }, 500);
        }
        
        // CSS animation for badge
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 20%, 60%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                80% { transform: translateY(-5px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
